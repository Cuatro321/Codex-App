<ion-header translucent="true">
  <ion-toolbar class="nexo-toolbar">
    <ion-title class="nexo-brand">CÃ³dex del Nexo</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen="true">
  <div class="ion-padding">
    <!-- Intro -->
    <div class="codex-card">
      <h2 class="codex-title">CÃ³dex del Nexo</h2>
      <p class="codex-subtitle">
        Historias, personajes, enemigos, dominios, artefactos y guÃ­as
        estratÃ©gicas. Todo el lore y contenido jugable en un solo lugar.
      </p>
    </div>

    <!-- Ãšltimas historias -->
    <div class="codex-card" style="margin-top: 1.5rem">
      <div class="codex-card-header">
        <h3>ğŸ“– Ãšltimas historias</h3>
      </div>

      <ng-container *ngIf="historias$ | async as historias; else loadingHistorias">
        <ion-list class="codex-list">
          <ion-item *ngFor="let h of historias">
            <ion-thumbnail slot="start" *ngIf="h.coverImageUrl">
              <img [src]="h.coverImageUrl" [alt]="h.title" />
            </ion-thumbnail>

            <ion-label>
              <h2>{{ h.title }}</h2>
              <p>{{ h.summary }}</p>
            </ion-label>
          </ion-item>
        </ion-list>
      </ng-container>

      <ng-template #loadingHistorias>
        <p style="margin-top: 0.5rem; opacity: 0.7">Cargando historias...</p>
      </ng-template>
    </div>

    <!-- Dominios destacados -->
    <div class="codex-card" style="margin-top: 1.5rem">
      <div class="codex-card-header">
        <h3>ğŸ›ï¸ Dominios</h3>
      </div>

      <div
        class="domain-chips"
        *ngIf="dominios$ | async as dominios; else loadingDominios"
      >
        <button class="domain-chip" *ngFor="let d of dominios">
          {{ d.name }}
        </button>
      </div>

      <ng-template #loadingDominios>
        <p style="margin-top: 0.5rem; opacity: 0.7">Cargando dominios...</p>
      </ng-template>
    </div>
  </div>
</ion-content>
